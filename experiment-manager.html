<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Experiment Management System - Pika Video Quality Evaluation</title>
    <link rel="stylesheet" href="experiment-manager.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Pika Video Quality Evaluation Experiment Management System</h1>
            <p>Create and manage SBS video quality comparison experiments</p>
            <nav>
                <a href="index.html" class="nav-btn">Back to SBS Test</a>
                <button id="clearAllData" class="clear-data-btn">🗑️ Clear All Data</button>
                <button id="githubSettings" class="github-settings-btn">⚙️ GitHub Sync</button>
            </nav>
        </header>

        <!-- Cloud Sync Settings Modal -->
        <div id="cloudSyncModal" class="modal" style="display: none;">
            <div class="modal-content">
                <h2>☁️ 云端同步设置</h2>
                <p>配置云端同步，让评价结果公开可见，所有用户都能查看统计数据。</p>
                
                <div class="sync-options">
                    <div class="option-card">
                        <h3>🔒 本地存储模式（当前）</h3>
                        <p>数据只保存在本地浏览器中，不会同步到云端。</p>
                        <div class="option-status">
                            <span class="status-dot" id="localStatus">●</span>
                            <span>当前活动模式</span>
                        </div>
                    </div>
                    
                    <div class="option-card">
                        <h3>☁️ 云端同步模式</h3>
                        <p>评价数据自动同步到GitHub，公开展示统计结果。</p>
                        <div class="form-group">
                            <label for="cloudGithubToken">GitHub Personal Access Token:</label>
                            <input type="password" id="cloudGithubToken" placeholder="ghp_xxxxxxxxxxxxxxxxxxxx" />
                            <small>
                                需要GitHub token来同步数据。
                                <a href="https://github.com/settings/tokens" target="_blank">创建Token</a>
                                (需要 'repo' 权限)
                            </small>
                        </div>
                        <div class="option-status">
                            <span class="status-dot" id="cloudStatus">●</span>
                            <span id="cloudStatusText">未配置</span>
                        </div>
                    </div>
                </div>
                
                <div class="sync-benefits">
                    <h4>☁️ 云端同步的好处：</h4>
                    <ul>
                        <li>📊 公共结果页面：所有用户都能查看评价统计</li>
                        <li>🔄 实时同步：评价完成后自动上传到云端</li>
                        <li>👥 多用户协作：不同用户的评价数据自动汇总</li>
                        <li>📈 可视化图表：饼图、统计数据等公开展示</li>
                        <li>🌐 跨设备访问：在任何设备上都能查看结果</li>
                    </ul>
                </div>
                
                <div class="modal-actions">
                    <button id="enableCloudSync" class="save-btn">启用云端同步</button>
                    <button id="disableCloudSync" class="test-btn">禁用云端同步</button>
                    <button id="testCloudSync" class="sync-btn">🔄 测试同步</button>
                    <button id="cancelCloudSync" class="cancel-btn">取消</button>
                </div>
            </div>
        </div>

        <div class="main-content">
            <!-- Quick Actions Section -->
            <section class="quick-actions">
                <div class="action-cards">
                    <div class="action-card create-card">
                        <div class="card-icon">🎬</div>
                        <h3>Create New Experiment</h3>
                        <p>Set up a new side-by-side video comparison experiment</p>
                        <a href="create-experiment.html" class="action-btn create-btn">Create Experiment</a>
                    </div>
                    
                    <div class="action-card manage-card">
                        <div class="card-icon">📁</div>
                        <h3>Manage Videos</h3>
                        <p>Upload and organize video files for experiments</p>
                        <a href="video-manager.html" class="action-btn manage-btn">Manage Videos</a>
                    </div>
                    
                    <div class="action-card sync-card">
                        <div class="card-icon">☁️</div>
                        <h3>Cloud Sync</h3>
                        <p>Configure cloud synchronization to share results publicly</p>
                        <button onclick="showCloudSyncModal()" class="action-btn sync-btn">Configure Cloud Sync</button>
                    </div>
                </div>
            </section>

            <!-- Experiments List Section -->
            <section class="experiments-list">
                <h2>Experiments List</h2>
                <div class="experiments-container" id="experimentsContainer">
                    <p class="no-experiments">No experiments yet, please create one first</p>
                </div>
            </section>

            <!-- Statistics Overview Section -->
            <section class="statistics-overview">
                <h2>Statistics Overview</h2>
                <div class="stats-grid" id="statsGrid">
                    <div class="stat-card">
                        <h3>Total Experiments</h3>
                        <span class="stat-number" id="totalExperiments">0</span>
                    </div>
                                    <div class="stat-card">
                    <h3>Active Experiments</h3>
                    <span class="stat-number" id="completedExperiments">0</span>
                </div>
                <div class="stat-card">
                    <h3>Total Ratings</h3>
                    <span class="stat-number" id="totalRatings">0</span>
                </div>
                <div class="stat-card">
                    <h3>Total Users</h3>
                    <span class="stat-number" id="avgCompletion">0 Users</span>
                </div>
                </div>
            </section>
        </div>

        <!-- Delete Confirmation Modal -->
        <div class="modal" id="deleteModal" style="display: none;">
            <div class="modal-content">
                <h3>Confirm Delete Experiment</h3>
                <p>Are you sure you want to delete this experiment? This action cannot be undone.</p>
                <div class="modal-buttons">
                    <button id="confirmDelete" class="delete-btn">Confirm Delete</button>
                    <button id="cancelDelete" class="cancel-btn">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.write(`<script src="cloud-sync.js?v=${new Date().getTime()}"><\/script>`);
        document.write(`<script src="auto-config.js?v=${new Date().getTime()}"><\/script>`);
        document.write(`<script src="experiment-manager.js?v=${new Date().getTime()}"><\/script>`);
    </script>
</body>
</html> 